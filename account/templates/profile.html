{% extends "base.html" %}
{% block content %}
  <section class="flex-1 p-8 max-w-6xl mx-auto">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 items-start">
      <!-- Profile Card -->
      <div class="card bg-base-200 shadow-xl">
        <div class="card-body">
          <h2 class="card-title text-2xl">
            {% if user.first_name %}
              {{ user.first_name }} {{ user.last_name }}
            {% else %}
              Hello, Stranger
            {% endif %}
          </h2>
          <p class="text-base-content/70">{{ user.email }}</p>
          <div class="divider"></div>
          <div class="flex items-center justify-between mb-4">
            <span class="text-sm font-semibold">Two-Factor Authentication</span>
            {% if user.mfa_enabled %}
              <div class="badge badge-success gap-2">
                {% include "icons/checkmark-circle.html" with class="w-3 h-3" %}
                Enabled
              </div>
            {% else %}
              <div class="badge badge-ghost gap-2">
                {% include "icons/block-x.html" with class="w-3 h-3" %}
                Disabled
              </div>
            {% endif %}
          </div>
          <div class="card-actions">
            <a href="{% url 'update_profile' %}" class="btn btn-primary btn-block">Update Profile</a>
          </div>
        </div>
      </div>
      <!-- Security & Devices Section -->
      <div class="lg:col-span-2">
        <div class="card bg-base-200 shadow-xl">
          <div class="card-body">
            <h2 class="card-title text-2xl mb-4">
              {% include "icons/shield.html" %}
              Security & Devices
            </h2>
            <div hx-get="{% url 'device_list' %}"
                 hx-trigger="load"
                 hx-swap="innerHTML"
                 class="min-h-32">
              <div class="flex items-center justify-center py-12">
                <span class="loading loading-spinner loading-lg"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
{% endblock content %}
